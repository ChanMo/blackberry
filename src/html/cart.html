{% extends "base.html" %}
{% block is_home %}hide{% endblock %}
{% block header %}{% endblock %}
{% block nav %}{% endblock %}
{% block footer %}{% endblock %}
{% block topbar %}
<div class="top-bar">
  <div class="top-bar__container" style="width:1000px;">
    <div class="top-bar__title">Welcome to Blackberry</div>
    <ul class="top-bar__left">
      <li><a href="login.html">登录</a></li>
      <li><a href="register.html">注册</a></li>
    </ul>
    <ul class="top-bar__right">
      <li><a href="member.html">chen</a></li>
      <li><a href="member.html">logout</a></li>
    </ul>
  </div>
</div>
{% endblock %}
{% block main %}
<div class="cart">
  <div class="cart__header">
    <div class="search-form">
      <input type="search">
      <input type="submit" value="搜&nbsp;索" class="button">
    </div>
  </div>
  <div class="cart__main">
    <div class="cart__main__header">
      <ul>
        <li class="active"><a href="#">全部商品</a></li>
        <li><a href="#">其他商品</a></li>
      </ul>
    </div>
    <div class="cart__main__table">
      <table>
        <tr>
          <th><label><input type="checkbox" class="check-all">全选</label></th>
          <th>商品</th>
          <th>单价</th>
          <th>数量</th>
          <th>金额</th>
          <th>操作</th>
        </tr>
        {% for i in range(0,6) %}
        <tr>
          <td>
            <input type="checkbox" class="check-item">
          </td>
          <td class="commodity">
            <div class="commodity__cover">
              <img src="https://img10.360buyimg.com/cms/s80x80_jfs/t2266/327/1938061101/70014/49ea6db1/5680ee39N967e6d3b.jpg">
            </div>
            <div class="commodity__title">
              <p>Blackberry passport</p>
              <p>black, small</p>
            </div>
          </td>
          <td class="price">4800</td>
          <td>
            <div class="count-box">
              <i>-</i>
              <input value="1">
              <i>+</i>
            </div>
          </td>
          <td class="price">4800</td>
          <td><a href="#">删除</a></td>
        </tr>
        {% endfor %}
      </table>
    </div>
  </div>

  <div class="cart__action">
    <div class="cart__action__container">
      <label><input type="checkbox" class="check-all">全选</label>
      <a href="#">删除选中的商品</a>
      <a href="#">移到我的关注</a>
      <a href="#" class="button">结&nbsp;算</a>
      <div>
        <span>已选商品<em>12</em>件</span>
        <span>合计（不含运费）： ￥<em>965.62</em></span>
      </div>
    </div>
  </div>
</div>

{% endblock %}
{% block js %}
<script>
/*** count box **/
$(".count-box_both").find("i").bind("click", function(e){
  e.preventDefault();
  var current = parseInt($(this).parent(".count-box_both").find("input").val());
  var index = $(this).index();
  if(index == 0){
    if(current > 1){
      current--;
    }
  }else if(index == 2){
    current++;
  }
  $(this).parent(".count-box_both").find("input").val(current);
});


$(".check-all").change(function(){
  if($(this).prop("checked") == true){
    $(".check-all").prop("checked", true);
    $(".check-item").prop("checked", true);
  }else{
    $(".check-all").prop("checked", false);
    $(".check-item").prop("checked", false);
  }
  make_price_all();
})


$(".check-item").change(function(){
  make_price_all();
})


function make_price_all(){
}
</script>
{% endblock %}
