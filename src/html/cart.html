{% extends "base.html" %}
{% block is_home %}hide{% endblock %}
{% block header %}{% endblock %}
{% block nav %}{% endblock %}
{% block footer %}{% endblock %}
{% block main %}
<div class="cart">
  <div class="cart__header">
    <div class="search-form">
      <input type="search">
      <input type="submit" value="search" class="button">
    </div>
  </div>
  <div class="cart__main">
    <div class="cart__main__header">
      <h5>全部商品</h5>
    </div>
    <div class="cart__main__table">
      <table>
        <tr>
          <th><label><input type="checkbox" class="check-all">全选</label></th>
          <th>商品</th>
          <th>单价</th>
          <th>数量</th>
          <th>金额</th>
          <th>操作</th>
        </tr>
        {% for i in range(0,6) %}
        <tr>
          <td><input type="checkbox" class="check-item"></td>
          <td class="commodity">
            <div class="commodity__cover">
              <img src="https://img10.360buyimg.com/cms/s80x80_jfs/t2266/327/1938061101/70014/49ea6db1/5680ee39N967e6d3b.jpg">
            </div>
            <div class="commodity__title">
              <p>Blackberry passport</p>
              <p>black, small</p>
            </div>
          </td>
          <td class="price">4800</td>
          <td>
            <div class="count-box">
              <i>-</i>
              <input value="1">
              <i>+</i>
            </div>
          </td>
          <td class="price">4800</td>
          <td><a href="#">删除</a></td>
        </tr>
        {% endfor %}
      </table>
    </div>
  </div>

  <div class="cart__action">
    <div class="cart__action__container">
      <label><input type="checkbox">all</label>
      <a href="#" class="button">checkout</a>
    </div>
  </div>
</div>

{% endblock %}
{% block js %}
<script>
/*** count box **/
$(".count-box_both").find("i").bind("click", function(e){
  e.preventDefault();
  var current = parseInt($(this).parent(".count-box_both").find("input").val());
  var index = $(this).index();
  if(index == 0){
    if(current > 1){
      current--;
    }
  }else if(index == 2){
    current++;
  }
  $(this).parent(".count-box_both").find("input").val(current);
});


$(".check-all").change(function(){
  if($(this).prop("checked") == true){
    $(".check-all").prop("checked", true);
    $(".check-item").prop("checked", true);
  }else{
    $(".check-all").prop("checked", false);
    $(".check-item").prop("checked", false);
  }
  make_price_all();
})


$(".check-item").change(function(){
  make_price_all();
})


function make_price_all(){
}
</script>
{% endblock %}
